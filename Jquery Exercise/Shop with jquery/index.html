<!doctype html>
<html lang="en">

<head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!--  Font Awesome for Bootstrap fonts and icons -->
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">

        <!-- Material Design for Bootstrap CSS -->
        <link rel="stylesheet"
                href="https://unpkg.com/bootstrap-material-design@4.1.1/dist/css/bootstrap-material-design.min.css"
                integrity="sha384-wXznGJNEXNG1NFsbm0ugrLFMQPWswR3lds2VeinahP8N0zJw9VWSopbjv2x7WCvX"
                crossorigin="anonymous">
        <link rel="stylesheet" href="style.css">
        <!-- for jquery -->
        
        
        <title>Online Shopping With Jquery</title>
        <style>
        	*
        	{
        		margin: 0;
        		padding: 0;
        	}
        /*body
        {
            background: rgb(230,230,250);
        }*/
        .loader_bg
        {

            position: fixed;
            z-index: 999999;
            //background: linear-gradient(to top right, #ffffff 0%, #ccffcc 100%);
            background: white;
            width: 100%;
            height: 100%;
        }

        .loader
        {
            border:0 solid transparent;
            border-radius: 50%;
            width: 150px;
            height: 150px;
            position: absolute;
            top: calc(30vh - 75px);
            left: calc(48.5vw - 75px);

        }
        .loader:before, .loader:after
        {
            content: '';
            border:1em solid #ff5733;
            //border:1em solid rgba(12,13,122,0.5);
            border-radius: 50%;
            width: inherit;
            height: inherit;
            position: absolute;
            top: 0;
            left: 0;
            animation: loader 2s linear infinite;
            opacity: 0;
        }
        .loader:before
        {
            animation-delay: .5s;
        }
        @keyframes loader{
            0%
            {
                transform: scale(0);
                opacity: 0;
            }
            50%
            {
                opacity: 1;
            }
            100%
            {
                transform: scale(1);
            }
        }
        .img_src
        {
        	width:125px;
        	/*right: 10px;*/
        	height: 125px;
        	border-radius: 50%;
        	//border:2px solid green;

        }
        .cart
        {
        	width:50px;
        	height:50px;
        }
        .count
        {
        	//border: 3px solid blue;
        	//border-radius: 50%;
        }
    </style>
    
        

</head>

<body>
    <div class="loader_bg">
        <div class="loader"></div>
    </div>
         <!-- Start Header -->

        <div class="jumbotron jumbotron-fluid header">
                <div class="container">
                        <h1 class="text-white text-center text-capitalize">Shopping</h1>
                        <br>
                </div>
        </div>

        <!-- Content -->
        <div class="container-fluid">
                <div class="row">
                        <div class="col-md-6 pr-3 pl-6 ">
                                <!-- Category List -->
                                <div class="card card-dark">
                                        <div class="card-header">
                                            <h4 class="text-center">My Shop</h4>
                                                
                                        </div>
                                        <div class="card-body">
                                        	<div class="container-fluid">
                                        		<div class="row">

                                        			<div class="card  mr-5">
                                        				<div class="card-body">
                                        					<img src="hambur.jpeg" alt="" class="img_src img-fluid">
                                        					<br><br>
                                        					<h5 class="text-secondary text-center">Hamburger</h5>
                                        					<br>
                                        					<h6 class="text-secondary text-center">Price:5000kyats</h6>
                                        					<br>
                                        					<button class="btn btn-outline-success addtocart" data-photo="hambur.jpeg" data-name="Hamburger" data-price="5000" data-id="1">Add to cart</button>
                                        				</div>
                                        			</div>
                                        			<div class="card  mr-5">
                                        				<div class="card-body">
                                        					<img src="fried-rice-final-resize-2.jpg" alt="" class="img_src img-fluid">
                                        					<br><br>
                                        					<h5 class="text-secondary text-center">Fired Rice</h5>
                                        					<br>
                                        					<h6 class="text-secondary text-center">Price:7000kyats</h6>
                                        					<br>
                                        					<button class="btn btn-outline-success addtocart" data-photo="fried-rice-final-resize-2.jpg" data-name="Fired Rice" data-price="7000" data-id="2">Add to cart</button>
                                        				</div>
                                        			</div>
                                        			<div class="card">
                                        				<div class="card-body">
                                        					<img src="Fried-Chicken.jpg" alt="" class="img_src img-fluid">
                                        					<br><br>
                                        					<h5 class="text-secondary text-center">Fried Chicken</h5>
                                        					<br>
                                        					<h6 class="text-secondary text-center">Price:10000kyats</h6>
                                        					<br>
                                        					<button class="btn btn-outline-success addtocart" data-photo="Fried-Chicken.jpg" data-name="Fried Chicken" data-price="10000" data-id="3">Add to cart</button>
                                        				</div>
                                        			</div>

                                        			<!-- <div class="card  mr-4">
                                        				<div class="card-body">
                                        					<button class="btn btn-outline-success">Add to cart</button>
                                        				</div>
                                        			</div>
                                        			<div class="card  mr-4">
                                        				<div class="card-body">
                                        					<button class="btn btn-outline-success">Add to cart</button>
                                        				</div>
                                        			</div> -->
                                        			
                                        			
                                        		</div>
                                        	</div>
                                        		
                                        		
                                        			
                                        		
                                        		<!-- <div class="col-md-2">
                                        			<div class="card">
                                            		<div class="card-body">
                                            		<img src="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fmakeyourmeals.com%2Fwp-content%2Fuploads%2F2019%2F03%2Fair-fryer-hamburger.jpg&f=1&nofb=1" alt="" width="100px" height="100px">
                                            		<p></p>
                                            		<p></p>
                                            		<button class="btn btn-outline-secondary">Add to cart</button>
                                            		</div>
                                            		</div>
                                        		</div> -->
                                        		<!-- <div class="col-md-2">
                                        			<div class="card">
                                            		<div class="card-body">
                                            		<img src="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fmakeyourmeals.com%2Fwp-content%2Fuploads%2F2019%2F03%2Fair-fryer-hamburger.jpg&f=1&nofb=1" alt="" width="100px" height="100px">
                                            		<p></p>
                                            		<p></p>
                                            		<button class="btn btn-outline-secondary">Add to cart</button>
                                            		</div>
                                            		</div>
                                        		</div> -->
                                        	</div>
                                             
                                               
                                		
                                
                        		</div>
                		</div>
                		<div class="col-md-6 pr-3 pl-6 ">
                                <!-- Category List -->
                                <div class="card card-dark">

                                        <div class="card-header">
                                        	<span class="count">0</span>
                                        	<br>
                                        	<img src="download.png" class="img-fluid cart" alt="">
                                        	
                                        	 <h4 class="text-center">My Cart</h4>
                                           
                                            
                                                
                                        </div>
                                        <div class="card-body">
                                             <table class="table table-bordered table-hover table-responsive-lg">
			                                	<thead>
			                                        <tr>
			                                                <th class="text-white">No</th>
			                                                <th class="text-white">Name</th>
			                                                <th class="text-white">Photo</th>
			                                                <th class="text-white">Qty</th>
			                                                <th class="text-white">Price</th>
			                                                <th class="text-white">Subtotal</th>
			                                                <th class="text-white">Action</th>
			            
			                                        </tr>
			                                	</thead>
			                                	<tbody>
			                                        
			                                	</tbody>
                        					</table>
                        					<button class="btn btn-outline-info" id="checkbtn">Checkout</button>     
                                		</div>
                                
                        		</div>
                		</div>
                </div>
</div>


        <!-- Optional JavaScript -->
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

        <!-- <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
                integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
                crossorigin="anonymous"></script> -->
        <script src="https://unpkg.com/popper.js@1.12.6/dist/umd/popper.js"
                integrity="sha384-fA23ZRQ3G/J53mElWqVJEGJzU0sTs+SvzG8fXVWP+kJQ1lwFAOkcUOysnlKJC33U"
                crossorigin="anonymous"></script>
        <script src="https://unpkg.com/bootstrap-material-design@4.1.1/dist/js/bootstrap-material-design.js"
                integrity="sha384-CauSuKpEqAFajSpkdjv3z9t8E7RlpJ1UP0lKM/+NdtSarroVKu069AlsRPKkFBz9"
                crossorigin="anonymous"></script>
        <script>$(document).ready(function () { $('body').bootstrapMaterialDesign(); });</script>
        <script type="text/javascript">
        setTimeout(function(){
            $(".loader_bg").fadeToggle();
        },3000);
        </script>
        <script type="text/javascript">
        	jQuery(document).ready(function() {
        		showData();
                count();
        		$(".addtocart").click(function(){
        			//alert("aSome");
        			let id=$(this).data('id');
        			let name=$(this).data('name');
        			let photo=$(this).data('photo');
        			let price=$(this).data('price');
        			//console.log(id+name+photo+price);
        			let item=
        			{
        				id:id,
        				name:name,
        				photo:photo,
        				price:price,
        				qty:1

        			};
        			//console.log(item);
        			let itemlist=localStorage.getItem('item');
        			let itemArray;
        			if(itemlist==null)
        			{
        				itemArray=[];
        			}
        			else
        			{
        				itemArray=JSON.parse(itemlist);
        			}
        			//console.log(itemArray);
        			let status=false;
        			$.each(itemArray,function(i, v) {

        				if(v.id==id)
        				{
        					//alert("hi");
        					v.qty++;
        					 status=true;
        				}
        				
        			});
        			if(!status)
        			{
        				itemArray.push(item);
        			}
        			
        			let itemString=JSON.stringify(itemArray);
        			localStorage.setItem('item',itemString);
        			showData();
                    count();



        		})

        		function showData(){
        			let itemlist=localStorage.getItem('item');
        			let itemArray=JSON.parse(itemlist);
        			//console.log(itemArray);
        			let j=1;
        			let html="";
        			let totals=0;
        			$.each(itemArray,function(i,v){
        				let total=v.qty*v.price;
        				totals+=total;
        				html+=
        				 
        				`<tr>
						<td>${j++}</td>
						<td>${v.name}</td>
						<td><img src="${v.photo}" width="50px" style="border-radius:50%" height ="50px"></td>
					    <td>
					    <button data-id="${i}" class="btn btn-outline-info btn_increase"><i class="fas fa-plus"></i></button>

					    <h6 class="text-center">${v.qty}</h6>
					    <button data-id="${i}" class="btn btn-outline-info btn_decrease"><i class="fas fa-minus"></i></button>
					    </td>
						<td>${v.price} Kyats</td>
						<td>${total}</td>
						<td><button data-id="${i}" class="btn btn-outline-danger btndelete"><i class="fas fa-times"></i></button></td>
				        </tr>`

        				
        			})
        			html+=`<tr><td class="text-success" colspan="6">Total</td><td class="text-success">${totals} Kyats</td></tr>`;
        			$("tbody").html(html);
        		}

        		$("#checkbtn").click(function(){
        			let itemlist=localStorage.getItem('item');
        			let itemArray=JSON.parse(itemlist);
        			let totals=0;
        			$.each(itemArray,function(i,v){

        				let total=v.qty*v.price;
        				totals+=total;

        			})
        			alert(totals+ ' Kyats');
        		})

        		$("tbody").on('click','.btndelete',function(){
        			let id=$(this).data('id');
        			//alert(id);
        			let itemlist=localStorage.getItem('item');
        			let itemArray=JSON.parse(itemlist);
        			itemArray.splice(id,1);
        			let stringitem=JSON.stringify(itemArray);
        			localStorage.setItem('item',stringitem);
        			showData();
                    count();
        		})

                function count(){
                    let totalcount=0;
                    let itemlist=localStorage.getItem('item');
                    if(itemlist)
                    {
                        let itemArray=JSON.parse(itemlist);
                        $.each(itemArray,function(i,v){
                        totalcount+=v.qty;
                    })
                    }
                    
                   
                    $(".count").html(totalcount);
                }

                $("tbody").on('click','.btn_increase',function(){
                    // alert("aSome");
                    let id=$(this).data('id');
                    //console.log(id);
                    let itemlist=localStorage.getItem('item');
                    let itemArray=JSON.parse(itemlist)
                    $.each(itemArray,function(i,v){
                        //console.log(i);
                        if(i==id)
                        {
                            v.qty++;
                        }
                        
                    })
                    let itemstring=JSON.stringify(itemArray);
                    localStorage.setItem("item", itemstring);
                    showData();
                    count();
                })

                $("tbody").on('click','.btn_decrease',function(){
                    // alert("aSome");
                    let id=$(this).data('id');
                    //console.log(id);
                    let itemlist=localStorage.getItem('item');
                    let itemArray=JSON.parse(itemlist)
                    $.each(itemArray,function(i,v){
                        //console.log(i);
                        if(i==id){
                    v.qty--;
                    if(v.qty<1){
                        
                        itemArray.splice(id,1);
                    }
                    }
                        
                    })
                    let itemstring=JSON.stringify(itemArray);
                    localStorage.setItem("item", itemstring);
                    showData();
                    count();
                })

        	});
        </script>
        
        
</body>

</html>




